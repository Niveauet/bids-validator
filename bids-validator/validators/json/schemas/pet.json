{
  "type": "object",
  "properties": {
    "Modality": { "type": "string", "minLength": 1 },
    "Manufacturer": { "type": "string", "minLength": 1 },
    "ManufacturersModelName": { "type": "string", "minLength": 1 },
    "Anaesthesia": { "type": "string", "minLength": 1 },
    "BodyPart": { "type": "string", "minLength": 1 },
    "Unit": {
      "type": "string",
      "minLength": 1
    },
    "TracerName": { "type": "string", "minLength": 1 },
    "TracerRadLex": { "type": "string", "minLength": 1 },
    "TracerSNOMED": { "type": "string", "minLength": 1 },
    "TracerRadionuclide": { "type": "string", "minLength": 1 },
    "TracerMolecularWeight": { "type": "number" },
    "TracerMolecularWeightUnit": { "type": "string", "minLength": 1 },
    "PharmaceuticalName": { "type": "string", "minLength": 1 },
    "PharmaceuticalDoseAmount": { "type": "string", "minLength": 1 },
    "PharmaceuticalDoseUnits": { "type": "string", "minLength": 1 },
    "PharmaceuticalDoseRegimen": { "type": "string", "minLength": 1 },
    "PharmaceuticalDoseTime": { "type": "number" },
    "PharmaceuticalDoseTimeUnits": { "type": "string", "minLength": 1 },

    "InjectedRadioactivity": { "type": "number" },
    "InjectedRadioactivityUnit": { "type": "string", "minLength": 1 },
    "InjectedMass": { "type": "number" },
    "InjectedMassUnit": { "type": "string", "minLength": 1 },
    "InjectedMassPerWeight": { "type": "number" },
    "InjectedMassPerWeightUnit": {
      "type": "string",
      "minLength": 1
    },
    "SpecificRadioactivity": { "type": "number" },
    "SpecificRadioactivityUnit": {
      "type": "string",
      "minLength": 1
    },
    "SpecificRadioactivityMeasTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "MolarActivity": { "type": "number" },
    "MolarActivityUnit": {
      "type": "string",
      "minLength": 1
    },
    "MolarActivityMeasTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "ModeOfAdministration": { "type": "string", "minLength": 1 },
    "InfusionSpeed": { "type": "string", "minLength": 1 },
    "InfusionSpeedUnit": { "type": "string", "minLength": 1 },
    "InjectedVolume": { "type": "number" },
    "InjectedVolumeUnit": { "type": "string", "minLength": 1 },
    "Purity": { "type": "number" },
    "PurityUnit": { "type": "string", "minLength": 1 },

    "ScanDate": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "ScanStart": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "InjectionStart": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "InjectionEnd": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "TimeZero": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "FrameTimesStart": {
      "type": "array",
      "items": { "type": "number" }
    },
    "FrameTimesStartUnit": { "type": "string", "minLength": 1 },
    "FrameTimesEnd": {
      "type": "array",
      "items": { "type": "number" }
    },
    "FrameTimesEndUnit": { "type": "string", "minLength": 1 },

    "AcquisitionMode": { "type": "string", "minLength": 1 },
    "ImageDecayCorrected": { "type": "boolean" },
    "ImageDecayCorrectionTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "DiameterFOV": {
      "type": "array",
      "items": { "type": "number" }
    },
    "DiameterFOVUnit": { "type": "string", "minLength": 1 },
    "ImageOrientation": {
      "type": "array",
      "items": { "type": "string" }
    },
    "ReconMatrixSize": {
      "type": "array",
      "items": { "type": "number" }
    },
    "ImageVoxelSize": {
      "type": "array",
      "items": { "type": "number" }
    },
    "ReconMethodName": { "type": "string", "minLength": 1 },
    "ReconMethodParameterLabels": {
      "type": "array",
      "items": { "type": "string" }
    },
    "ReconMethodParameterUnit": {
      "type": "array",
      "items": { "type": "string" }
    },
    "ReconMethodParameterValues": {
      "type": "array",
      "items": { "type": "number" }
    },
    "ReconMethodImplementationVersion": { "type": "string", "minLength": 1 },
    "ReconFilterType": {
      "type": "array",
      "items": { "type": "string" }
    },
    "ReconFilterSize": {
      "type": "array",
      "items": { "type": "number" }
    },
    "AttenuationCorrection": { "type": "string", "minLength": 1 },
    "AttenuationCorrectionMethodReference": {
      "type": "string",
      "minLength": 1
    },
    "ScaleFactor": {
      "type": "array",
      "items": { "type": "number" }
    },
    "ScatterFraction": {
      "type": "array",
      "items": { "type": "number" }
    },
    "DecayCorretionFactor": {
      "type": "array",
      "items": { "type": "number" }
    },
    "PromptRate": {
      "type": "array",
      "items": { "type": "number" }
    },
    "RandomRate": {
      "type": "array",
      "items": { "type": "number" }
    },
    "SinglesRate": {
      "type": "array",
      "items": { "type": "number" }
    },

    "MetaboliteAvail": {
      "default": false,
      "type": "boolean"
    },
    "PlasmaAvail": {
      "default": false,
      "type": "boolean"
    },
    "ContinousBloodAvail": {
      "default": false,
      "type": "boolean"
    },
    "DiscreteBloodAvail": {
      "default": false,
      "type": "boolean"
    },

    "Modality": { "type": "string", "minLength": 1 },
    "PlasmaType": { "type": "string", "minLength": 1 },
    "FreeFraction": {
      "type": "number",
      "min": 0,
      "max": 1
    },
    "FreeFractionMethod": { "type": "string", "minLength": 1 },
    "PlasmaTimeZero": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "PlasmaDecayCorrected": { "type": "boolean" },
    "PlasmaDecayCorrectionTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "PlasmaSampleTime": {
      "type": "array",
      "items": { "type": "number" }
    },
    "PlasmaSampleTimeUnits": { "type": "string", "minLength": 1 },
    "PlasmaActivity": {
      "type": "array",
      "items": { "type": "number" }
    },
    "PlasmaActivityUnits": { "type": "string", "minLength": 1 },

    "MetaboliteType": { "type": "string", "minLength": 1 },
    "MetaboliteMethod": { "type": "string", "minLength": 1 },
    "MetaboliteTimeZero": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "MetaboliteSampleTime": {
      "type": "array",
      "items": { "type": "number" }
    },
    "MetaboliteSampleTimeUnits": { "type": "string", "minLength": 1 },
    "MetaboliteParentFraction": {
      "type": "array",
      "items": {
        "type": "number",
        "min": 0,
        "max": 1
      }
    },
    "MetaboliteParentFractionUnits": { "type": "string", "minLength": 1 },
    "MetabolitePolar": { "type": "array", "items": { "type": "number" } },
    "MetabolitePolarUnits": { "type": "string", "minLength": 1 },
    "MetaboliteLipophilic": {
      "type": "array",
      "items": { "type": "number" }
    },
    "MetaboliteLipophilicUnits": { "type": "string", "minLength": 1 },

    "Haematocrit": { "type": "string", "minLength": 1 },
    "BloodDensity": { "type": "string", "minLength": 1 },
    "BloodDensityUnits": { "type": "string", "minLength": 1 },
    "BloodDiscreteTimeZero": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "BloodDiscreteDecayCorrected": { "type": "boolean" },
    "BloodDiscreteDecayCorrectionTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "BloodDiscreteType": { "type": "string", "minLength": 1 },
    "BloodDiscreteSampleTime": {
      "type": "array",
      "items": { "type": "number" }
    },
    "BloodDiscreteSampleTimeUnits": { "type": "string", "minLength": 1 },
    "BloodDiscreteActivity": {
      "type": "array",
      "items": { "type": "number" }
    },
    "BloodDiscreteActivityUnits": { "type": "string", "minLength": 1 },

    "WithdrawalRate": { "type": "string", "minLength": 1 },
    "WithdrawalRateUnits": { "type": "string", "minLength": 1 },
    "TubingLength": { "type": "string", "minLength": 1 },
    "TubingLengthUnits": { "type": "string", "minLength": 1 },
    "DispersionCorrected": { "type": "boolean" },
    "DispersionConstant": { "type": "string", "minLength": 1 },
    "DispersionConstantUnits": { "type": "string", "minLength": 1 },
    "BloodContinuousTimeZero": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "BloodContinuousDecayCorrected": { "type": "boolean" },
    "BloodContinuousDecayCorrectionTime": {
      "type": "string",
      "pattern": "^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$"
    },
    "BloodContinuousType": { "type": "string", "minLength": 1 },
    "BloodContinuousSampleTime": {
      "type": "array",
      "items": { "type": "number" }
    },
    "BloodContinuousSampleTimeUnits": { "type": "string", "minLength": 1 },
    "BloodContinuousActivity": {
      "type": "array",
      "items": { "type": "number" }
    },
    "BloodContinuousActivityUnits": { "type": "string", "minLength": 1 }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "MetaboliteAvail": {
            "enum": [true]
          }
        }
      },
      "then": {
        "required": ["MetaboliteMethod", "MetaboliteRecoveryCorrectionApplied"]
      }
    },
    {
      "if": {
        "properties": {
          "ContinousBloodAvail": {
            "enum": [true]
          }
        }
      },
      "then": {
        "required": ["ContinousBloodDispersionCorrected"]
      }
    }
  ],
  "required": [
    "Modality",
    "Manufacturer",
    "ManufacturersModelName",
    "Unit",
    "TracerName",
    "TracerRadionuclide",

    "InjectedRadioactivity",
    "InjectedRadioactivityUnit",
    "InjectedMass",
    "InjectedMassUnit",
    "SpecificRadioactivity",
    "SpecificRadioactivityUnit",
    "ModeOfAdministration",

    "ScanStart",
    "InjectionStart",
    "TimeZero",
    "FrameTimesStart",
    "FrameTimesStartUnit",
    "FrameDuration",
    "FrameDurationUnit",
    "AcquisitionMode",
    "ImageDecayCorrected",
    "ImageDecayCorrectionTime",
    "ReconMatrixSize",
    "ImageVoxelSize",
    "ReconMethodName",
    "ReconMethodParameterLabels",
    "ReconMethodParameterUnit",
    "ReconMethodParameterValues",
    "ReconFilterType",
    "ReconFilterSize",
    "AttenuationCorrection",

    "MetaboliteAvail",
    "PlasmaAvail",
    "ContinousBloodAvail",
    "DiscreteBloodAvail"
  ],
  "dependencies": {
    "TracerMolecularWeight": ["TracerMolecularWeightUnit"],
    "BodyWeight": ["BodyWeightUnit"],

    "InjectedRadioactivity": ["InjectedRadioactivityUnit"],
    "InjectedMass": ["InjectedMassUnit"],
    "InjectedMassPerWeight": ["InjectedMassPerWeightUnit"],
    "MolarActivity": ["MolarActivityUnit"],
    "SpecificRadioactivity": ["SpecificRadioactivityUnit"],
    "Purity": ["PurityUnit"],
    "InfusionSpeed": ["InfusionSpeedUnit"],
    "InjectedVolume": ["InjectedVolumeUnit"],

    "FrameTimesStart": ["FrameTimesStartUnit"],
    "FrameDuration": ["FrameDurationUnit"],

    "DiameterFOV": ["DiameterFOVUnit"],
    "ReconMethodParameterLabels": [
      "ReconMethodParameterUnit",
      "ReconMethodParameterValues"
    ],

    "PlasmaDecayCorrected": ["PlasmaDecayCorrectionTime"],
    "PlasmaSampleTime": ["PlasmaSampleTimeUnits"],
    "PlasmaActivity": ["PlasmaActivityUnits"],

    "MetaboliteSampleTime": ["MetaboliteSampleTimeUnits"],
    "MetaboliteParentFraction": ["MetaboliteParentFractionUnits"],
    "MetabolitePolar": ["MetabolitePolarUnits"],
    "MetaboliteLipophilic": ["MetaboliteLipophilicUnits"],

    "BloodDensity": ["BloodDensityUnits"],
    "BloodDiscreteDecayCorrected": ["BloodDiscreteDecayCorrectionTime"],
    "BloodDiscreteSampleTime": ["BloodDiscreteSampleTimeUnits"],
    "BloodDiscreteActivity": ["BloodDiscreteActivityUnits"],

    "WithdrawalRate": ["WithdrawalRateUnits"],
    "TubingLength": ["TubingLengthUnits"],
    "DispersionCorrected": ["DispersionConstant", "DispersionConstantUnits"],
    "BloodContinuousSampleTime": ["BloodContinuousSampleTimeUnits"],
    "BloodContinuousActivity": ["BloodContinuousActivityUnits"],
    "BloodContinuousDecayCorrected": ["BloodContinuousDecayCorrectionTime"]
  }
}
